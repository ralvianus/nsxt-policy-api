{
	"info": {
		"_postman_id": "021ed736-5ab8-43e7-b8e0-ceafbd87d35c",
		"name": "NSX Policy API",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "https://{{nsxmanager}}/policy/api/v1/infra/",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "VMware1!VMware1!",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "PATCH",
				"header": [
					{
						"key": "Authorization",
						"value": "Basic YWRtaW46QWRtaW4hMjNBZG1pbg=="
					},
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "Postman-Token",
						"value": "873c52d3-9759-44a2-bda7-becda0a96575"
					},
					{
						"key": "cache-control",
						"value": "no-cache"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"resource_type\": \"Infra\",\n  \"children\": [\n    {\n      \"resource_type\": \"ChildTier1\",\n      \"marked_for_delete\": \"{{marked_for_delete}}\",\n      \"Tier1\": {\n        \"resource_type\": \"Tier1\",\n        \"id\": \"{{Tier1-name}}\",\n        \"description\": \"{{Tier1-description}}\",\n        \"display_name\": \"{{Tier1-name}}\",\n        \"failover_mode\": \"{{Tier1-failover_mode}}\",\n        \"tier0_path\":\"/infra/tier-0s/Tier-0-GW\",\n        \"route_advertisement_types\": [\n          \"TIER1_CONNECTED\"\n        ],\n        \"children\": [\n          {\n           \"resource_type\":\"ChildLocaleServices\",\n\n           \"LocaleServices\":{\n\n               \"resource_type\":\"LocaleServices\",\n               \"id\":  \"default\",\n                \"edge_cluster_path\": \"/infra/sites/default/enforcement-points/default/edge-clusters/{{edge-cluster-id}}\"\n                }\n        },\n          {\n            \"resource_type\": \"ChildSegment\",\n            \"Segment\": {\n              \"resource_type\": \"Segment\",\n              \"id\": \"{{Segment1-id}}\",\n              \"description\": \"{{Segment1-description}}\",\n              \"display_name\": \"{{Segment1-id}}\",\n              \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{Segment-TZid}}\",\n              \"subnets\": [\n                {\n                  \"gateway_address\": \"{{Segment1-gw}}\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildSegment\",\n            \"Segment\": {\n              \"resource_type\": \"Segment\",\n              \"id\": \"{{Segment2-id}}\",\n              \"description\": \"{{Segment2-description}}\",\n              \"display_name\": \"{{Segment2-id}}\",\n              \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{Segment-TZid}}\",\n              \"subnets\": [\n                {\n                  \"gateway_address\": \"{{Segment2-gw}}\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildSegment\",\n            \"Segment\": {\n              \"resource_type\": \"Segment\",\n              \"id\": \"{{Segment3-id}}\",\n              \"description\": \"{{Segment3-description}}\",\n              \"display_name\": \"{{Segment3-id}}\",\n              \"transport_zone_path\": \"/infra/sites/default/enforcement-points/default/transport-zones/{{Segment-TZid}}\",\n              \"subnets\": [\n                {\n                  \"gateway_address\": \"{{Segment3-gw}}\"\n                }\n              ]\n            }\n          },\n          {\n             \"resource_type\": \"ChildPolicyNat\",\n             \"PolicyNat\": {\n             \"id\": \"USER\",\n             \"resource_type\": \"PolicyNat\",\n             \"children\": [\n                {\n                   \"resource_type\": \"ChildPolicyNatRule\",\n                   \"PolicyNatRule\": {\n                      \"resource_type\": \"PolicyNatRule\",\n                      \"id\": \"{{NAT-Rule-id}}\",\n                      \"action\": \"SNAT\",\n                      \"source_network\": \"{{NAT-Source}}\",\n                      \"service\": \"\",\n                      \"translated_network\": \"{{NAT-IP}}\",\n                      \"scope\": [],\n                      \"enabled\": true,\n                      \"firewall_match\": \"BYPASS\",\n                      \"display_name\": \"{{NAT-Rule-id}}\",\n                      \"parent_path\": \"/infra/tier-1s/{{Tier1-name}}/nat/USER\"\n                   }\n                }\n             ]\n           }\n        }\n       ]\n      }\n    },\n    {\n      \"resource_type\": \"ChildDomain\",\n      \"marked_for_delete\": \"false\",\n      \"Domain\": {\n        \"id\": \"default\",\n        \"resource_type\": \"Domain\",\n        \"description\": \"default\",\n        \"display_name\": \"default\",\n        \"marked_for_delete\": \"false\",\n        \"children\": [\n          {\n            \"resource_type\": \"ChildGroup\",\n            \"Group\": {\n              \"resource_type\": \"Group\",\n              \"marked_for_delete\": \"{{marked_for_delete}}\",\n              \"description\": \"{{secgroup1-id}}\",\n              \"display_name\": \"{{secgroup1-id}}\",\n              \"id\": \"{{secgroup1-id}}\",\n              \"expression\": [\n                {\n                  \"member_type\": \"VirtualMachine\",\n                  \"value\": \"{{scope}}|{{sectag1}}\",\n                  \"key\": \"Tag\",\n                  \"operator\": \"EQUALS\",\n                  \"resource_type\": \"Condition\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildGroup\",\n            \"Group\": {\n              \"resource_type\": \"Group\",\n              \"marked_for_delete\": \"{{marked_for_delete}}\",\n              \"description\": \"{{secgroup2-id}}\",\n              \"display_name\": \"{{secgroup2-id}}\",\n              \"id\": \"{{secgroup2-id}}\",\n              \"expression\": [\n                {\n                  \"member_type\": \"VirtualMachine\",\n                  \"value\": \"{{scope}}|{{sectag2}}\",\n                  \"key\": \"Tag\",\n                  \"operator\": \"EQUALS\",\n                  \"resource_type\": \"Condition\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildGroup\",\n            \"Group\": {\n              \"resource_type\": \"Group\",\n              \"marked_for_delete\": \"{{marked_for_delete}}\",\n              \"description\": \"{{secgroup3-id}}\",\n              \"display_name\": \"{{secgroup3-id}}\",\n              \"id\": \"{{secgroup3-id}}\",\n              \"expression\": [\n                {\n                  \"member_type\": \"VirtualMachine\",\n                  \"value\": \"{{scope}}|{{sectag3}}\",\n                  \"key\": \"Tag\",\n                  \"operator\": \"EQUALS\",\n                  \"resource_type\": \"Condition\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildGroup\",\n            \"Group\": {\n              \"resource_type\": \"Group\",\n              \"marked_for_delete\": \"{{marked_for_delete}}\",\n              \"description\": \"{{secgroupblanket-id}}\",\n              \"display_name\": \"{{secgroupblanket-id}}\",\n              \"id\": \"{{secgroupblanket-id}}\",\n              \"expression\": [\n                {\n                  \"member_type\": \"VirtualMachine\",\n                  \"value\": \"{{scope}}|{{sectagblanket}}\",\n                  \"key\": \"Tag\",\n                  \"operator\": \"EQUALS\",\n                  \"resource_type\": \"Condition\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildSecurityPolicy\",\n            \"marked_for_delete\": \"{{marked_for_delete}}\",\n            \"SecurityPolicy\": {\n              \"id\": \"{{EW-securitypolicy-section-id}}\",\n              \"resource_type\": \"SecurityPolicy\",\n              \"description\": \"communication map\",\n              \"display_name\": \"{{EW-securitypolicy-section-id}}\",\n              \"rules\": [\n                {\n                  \"resource_type\": \"Rule\",\n                  \"description\": \"Communication Entry\",\n                  \"display_name\": \"{{Rule1-id}}\",\n                  \"sequence_number\": 1,\n                  \"logged\": true,\n                  \"source_groups\": [\n                    \"ANY\"\n                  ],\n                  \"destination_groups\": [\n                    \"/infra/domains/default/groups/{{secgroup1-id}}\"\n                  ],\n                  \"services\": [\n                    \"/infra/services/HTTP\"\n                  ],\n                  \"scope\": [\n                    \"/infra/domains/default/groups/{{secgroupblanket-id}}\"\n                  ],\n                  \"action\": \"ALLOW\"\n                },\n                {\n                  \"resource_type\": \"Rule\",\n                  \"description\": \"Communication Entry 2\",\n                  \"display_name\": \"{{Rule2-id}}\",\n                  \"sequence_number\": 2,\n                  \"logged\": true,\n                  \"source_groups\": [\n                    \"/infra/domains/default/groups/{{secgroup1-id}}\"\n                  ],\n                  \"destination_groups\": [\n                    \"/infra/domains/default/groups/{{secgroup2-id}}\"\n                  ],\n                  \"services\": [\n                    \"/infra/services/HTTP\"\n                  ],\n                  \"scope\": [\n                    \"/infra/domains/default/groups/{{secgroupblanket-id}}\"\n                  ],\n                  \"action\": \"ALLOW\"\n                },\n                {\n                  \"resource_type\": \"Rule\",\n                  \"description\": \"Communication Entry 3\",\n                  \"display_name\": \"{{Rule3-id}}\",\n                  \"sequence_number\": 3,\n                  \"logged\": true,\n                  \"source_groups\": [\n                    \"/infra/domains/default/groups/{{secgroup2-id}}\"\n                  ],\n                  \"destination_groups\": [\n                    \"/infra/domains/default/groups/{{secgroup3-id}}\"\n                  ],\n                  \"services\": [\n                    \"/infra/services/MySQL\"\n                  ],\n                  \"scope\": [\n                    \"/infra/domains/default/groups/{{secgroupblanket-id}}\"\n                  ],\n                  \"action\": \"ALLOW\"\n                }\n              ]\n            }\n          },\n          {\n            \"resource_type\": \"ChildGatewayPolicy\",\n            \"marked_for_delete\": \"{{marked_for_delete}}\",\n            \"GatewayPolicy\": {\n              \"resource_type\": \"GatewayPolicy\",\n              \"id\": \"{{NS-securitypolicy-section-id}}\",\n              \"display_name\": \"{{NS-securitypolicy-section-id}}\",\n              \"parent_path\": \"/infra/domains/default\",\n              \"marked_for_delete\": \"{{marked_for_delete}}\",\n              \"rules\": [\n                {\n                 \"source_groups\": [\n                        \"ANY\"\n                    ],\n                    \"destination_groups\": [\n                        \"/infra/domains/default/groups/{{secgroup1-id}}\"\n                    ],\n                    \"services\": [\n                        \"/infra/services/HTTP\"\n                    ],\n                    \"profiles\": [\n                        \"ANY\"\n                    ],\n                    \"action\": \"ALLOW\",\n                    \"logged\": true,\n                    \"scope\": [\n                        \"/infra/tier-1s/{{Tier1-name}}\"\n                    ],\n                    \"disabled\": false,\n                    \"notes\": \"\",\n                    \"direction\": \"IN_OUT\",\n                    \"tag\": \"\",\n                    \"ip_protocol\": \"IPV4_IPV6\",\n                    \"resource_type\": \"Rule\",\n                    \"id\": \"Any-to-web\",\n                    \"display_name\": \"Any-to-web\"\n                },\n                {\n                 \"source_groups\": [\n                        \"ANY\"\n                    ],\n                    \"destination_groups\": [\n                        \"/infra/domains/default/groups/{{secgroup1-id}}\",\n                        \"/infra/domains/default/groups/{{secgroup2-id}}\",\n                        \"/infra/domains/default/groups/{{secgroup3-id}}\"\n                    ],\n                    \"services\": [\n                        \"ANY\"\n                    ],\n                    \"profiles\": [\n                        \"ANY\"\n                    ],\n                    \"action\": \"DROP\",\n                    \"logged\": false,\n                    \"scope\": [\n                        \"/infra/tier-1s/{{Tier1-name}}\"\n                    ],\n                    \"disabled\": false,\n                    \"notes\": \"\",\n                    \"direction\": \"IN_OUT\",\n                    \"tag\": \"\",\n                    \"ip_protocol\": \"IPV4_IPV6\",\n                    \"resource_type\": \"Rule\",\n                    \"id\": \"DenyAny\",\n                    \"display_name\": \"DenyAny\"\n                }\n               ]\n            }\n          }\n       ]\n    }\n   },\n    {\n      \"resource_type\": \"ChildLBClientSslProfile\",\n      \"LBClientSslProfile\": {\n        \"resource_type\": \"LBClientSslProfile\",\n        \"id\": \"batchSetupClientSslProfile\",\n        \"cipher_group_label\": \"CUSTOM\",\n        \"session_cache_enabled\": true,\n        \"ciphers\": [\n          \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\n          \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\"\n        ],\n        \"protocols\": [\n          \"TLS_V1_2\"\n        ]\n      }\n    },\n    {\n      \"resource_type\": \"ChildLBServerSslProfile\",\n      \"LBServerSslProfile\": {\n        \"resource_type\": \"LBServerSslProfile\",\n        \"id\": \"batchSetupServerSslProfile\",\n        \"cipher_group_label\": \"CUSTOM\",\n        \"session_cache_enabled\": true,\n        \"ciphers\": [\n          \"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\",\n          \"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\"\n        ],\n        \"protocols\": [\n          \"TLS_V1_2\"\n        ]\n      }\n    },\n    {\n      \"resource_type\": \"ChildLBAppProfile\",\n      \"LBAppProfile\": {\n        \"resource_type\": \"LBHttpProfile\",\n        \"id\": \"batchSetupHttpAppProfile\",\n        \"x_forwarded_for\": \"INSERT\"\n      }\n    },\n    {\n      \"resource_type\": \"ChildLBMonitorProfile\",\n      \"LBMonitorProfile\": {\n        \"resource_type\": \"LBHttpMonitorProfile\",\n        \"id\": \"batchSetupHttpMonitor1\",\n        \"monitor_port\": 80,\n        \"timeout\": 5,\n        \"response_status_codes\": [\n          200,\n          300\n        ]\n      }\n    },\n    {\n      \"resource_type\": \"ChildLBMonitorProfile\",\n      \"LBMonitorProfile\": {\n        \"resource_type\": \"LBHttpsMonitorProfile\",\n        \"id\": \"batchSetupHttpsMonitor1\",\n        \"monitor_port\": 443,\n        \"timeout\": 5,\n        \"response_status_codes\": [\n          200\n        ]\n      }\n    },\n    {\n      \"resource_type\": \"ChildLBService\",\n      \"LBService\": {\n        \"resource_type\": \"LBService\",\n        \"id\": \"{{lb-id}}\",\n        \"connectivity_path\": \"/infra/tier-1s/{{Tier1-name}}\",\n        \"error_log_level\": \"DEBUG\",\n        \"access_log_enabled\": true\n      }\n    },\n    {\n      \"resource_type\": \"ChildLBVirtualServer\",\n      \"LBVirtualServer\": {\n        \"resource_type\": \"LBVirtualServer\",\n        \"id\": \"{{vs-id}}\",\n        \"lb_service_path\": \"/infra/lb-services/{{lb-id}}\",\n        \"ip_address\": \"{{vs-ip}}\",\n        \"ports\": [\n          \"80\"\n        ],\n        \"pool_path\": \"/infra/lb-pools/{{pool-id}}\",\n        \"application_profile_path\": \"/infra/lb-app-profiles/batchSetupHttpAppProfile\"\n        }\n      },\n    {\n      \"resource_type\": \"ChildLBPool\",\n      \"LBPool\":\n      {\n        \"id\": \"{{pool-id}}\",\n        \"resource_type\": \"LBPool\",\n        \"active_monitor_paths\": [\n          \"/infra/lb-monitor-profiles/batchSetupHttpMonitor1\"\n        ],\n            \"algorithm\": \"ROUND_ROBIN\",\n            \"member_group\": {\n                \"group_path\": \"/infra/domains/default/groups/{{secgroup1-id}}\",\n                \"ip_revision_filter\": \"IPV4\"\n            },\n            \"snat_translation\": {\n                \"type\": \"LBSnatDisabled\"\n            }\n      }\n    }\n  ]\n}\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://{{nsxmanager}}/policy/api/v1/infra/",
					"protocol": "https",
					"host": [
						"{{nsxmanager}}"
					],
					"path": [
						"policy",
						"api",
						"v1",
						"infra",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "https://{{nsxmanager}}/policy/api/v1/infra/domains/default/security-policies/92cd6b30-f63b-11e9-84e7-5f09cbbb97e6",
			"request": {
				"auth": {
					"type": "basic",
					"basic": [
						{
							"key": "password",
							"value": "VMware1!VMware1!",
							"type": "string"
						},
						{
							"key": "username",
							"value": "admin",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://{{nsxmanager}}/policy/api/v1/infra/domains/default/security-policies/92cd6b30-f63b-11e9-84e7-5f09cbbb97e6",
					"protocol": "https",
					"host": [
						"{{nsxmanager}}"
					],
					"path": [
						"policy",
						"api",
						"v1",
						"infra",
						"domains",
						"default",
						"security-policies",
						"92cd6b30-f63b-11e9-84e7-5f09cbbb97e6"
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}